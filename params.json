{"name":"Ides-data-preparation-openssl","tagline":"","body":"## IDES Data Preparation\r\n\r\nThe International Data Exchange Service (IDES) is a secure managed file transfer service that allows financial institutions and tax authorities to securely send information on financial accounts held by U.S. taxpayers in accordance with the Foreign Account Tax Compliance Act (FATCA). Files transmitted via IDES must be encrypted and packaged in accordance with published data preparation instructions. The data preparation process is an important step to ensure that information transmitted via IDES conforms to U.S security standards to safeguard sensitive information.\r\n\r\nThe IDES Data Preparation OpenSSL project repository demonstrates the commands necessary to decrypt notifications downloaded from the IDES portal. The included commands are Windows specific, Linux specific, and a process that includes manual editing that will work for those and other systems.\r\n\r\nThe sample commands are intended to be run from a batch file located along with the OpenSSL executable, the Key and Payload files from the notification, and the receiver's private key. \r\n\r\nPlease note that there are many open market tools that produce the same results; however, the IRS does not endorse any commercial products, including the frameworks used in the example. \r\n\r\n### Windows Batch Scripting\r\n\r\nThe following code should be placed into a batch file and run in the same folder as the openssl executable. \r\n\r\nThe following files are required and the filename in the batch script will need to be replaced with your filename for each:\r\nKEYFILE - this is the Key file that will be in the downloaded notification .zip file\r\nPRIVATEKEY - this will be your private key that corresponds to the certificate that was uploaded into IDES\r\nPAYLOAD - this is the Payload file that will be in the downloaded notification .zip file\r\n\r\n\r\n```\r\n\r\nopenssl rsautl -decrypt -hexdump -in KEYFILE -inkey PRIVATEKEY -out aeskey.txt\r\n\r\nset /p firstline=< aeskey.txt  \r\nSet line1=%firstline%     \r\nset result1=%line1:~7,48%                           \r\n\r\nSetlocal EnableDelayedExpansion\r\nfor /f \"tokens=* delims= \" %%i in (aeskey.txt) do (\r\nset var=%%i\r\n)\r\nset result2=!var:~7,48!  \r\n\r\nset result1=%result1: =%\r\nset result1=%result1:-=%\r\nset result1=%result1:~0,32%\r\nset result2=%result2: =%\r\nset result2=%result2:-=%\r\nset result2=%result2:~0,32%\r\nset combined=%result1%%result2%\r\n\r\nopenssl aes-256-ecb -d -in PAYLOAD -out PAYLOAD.zip -K %combined%\r\n\r\n\r\n```\r\n\r\nIf you're using the GitHub for Mac, simply sync your repository and you'll see the new branch.\r\n\r\n### Designer Templates\r\nWe've crafted some handsome templates for you to use. Go ahead and continue to layouts to browse through them. You can easily go back to edit your page before publishing. After publishing your page, you can revisit the page generator and switch to another theme. Your Page content will be preserved if it remained markdown format.\r\n\r\n### Rather Drive Stick?\r\nIf you prefer to not use the automatic generator, push a branch named `gh-pages` to your repository to create a page manually. In addition to supporting regular HTML content, GitHub Pages support Jekyll, a simple, blog aware static site generator written by our own Tom Preston-Werner. Jekyll makes it easy to create site-wide headers and footers without having to copy them across every page. It also offers intelligent blog support and other advanced templating features.\r\n\r\n### Authors and Contributors\r\nYou can @mention a GitHub username to generate a link to their profile. The resulting `<a>` element will link to the contributor's GitHub Profile. For example: In 2007, Chris Wanstrath (@defunkt), PJ Hyett (@pjhyett), and Tom Preston-Werner (@mojombo) founded GitHub.\r\n\r\n### Support or Contact\r\nHaving trouble with Pages? Check out the documentation at https://help.github.com/pages or contact support@github.com and weâ€™ll help you sort it out.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}